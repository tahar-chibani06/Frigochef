<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FrigoChef - Cuisine Alg√©rienne & Du Monde</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        /* Styles personnalis√©s */
        :root {
            --primary-color: #e67e22; /* Orange carotte */
            --secondary-color: #2ecc71; /* Vert l√©gume */
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f3f4f6;
        }

        .hero-pattern {
            background-color: #ffffff;
            background-image: radial-gradient(#e67e22 0.5px, transparent 0.5px), radial-gradient(#e67e22 0.5px, #ffffff 0.5px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            opacity: 0.1;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .recipe-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .recipe-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        /* Animation de chargement simple */
        .loader {
            border-top-color: #e67e22;
            -webkit-animation: spinner 1.5s linear infinite;
            animation: spinner 1.5s linear infinite;
        }
        
        @keyframes spinner {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="relative min-h-screen">

    <div class="hero-pattern"></div>

    <header class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fas fa-utensils text-orange-500 text-2xl"></i>
                <h1 class="text-2xl font-bold text-gray-800">Frigo<span class="text-orange-500">Chef</span></h1>
            </div>
            <button id="toggle-lang" class="text-sm font-semibold text-gray-600 hover:text-orange-500 transition">
                FR | AR
            </button>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8 max-w-2xl mx-auto border-t-4 border-orange-500">
            <h2 class="text-xl font-semibold mb-4 text-center text-gray-700">Qu'avez-vous dans votre frigo ?</h2>
            
            <div class="flex flex-col md:flex-row gap-3">
                <div class="relative flex-grow">
                    <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                        <i class="fas fa-search text-gray-400"></i>
                    </span>
                    <input type="text" id="ingredient-input" 
                        class="w-full py-3 pl-10 pr-4 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500" 
                        placeholder="Ex: Tomate, Oignon, Poulet, Oeufs...">
                </div>
                <button onclick="findRecipes()" 
                    class="bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-6 rounded-lg transition duration-300 flex items-center justify-center gap-2">
                    <span>Cuisiner</span>
                    <i class="fas fa-magic"></i>
                </button>
            </div>
            
            <div class="mt-3 flex flex-wrap gap-2" id="tags-container">
                </div>
            
            <p class="text-xs text-gray-400 mt-2 text-center">S√©parez les ingr√©dients par une virgule ou appuyez sur Entr√©e.</p>
        </div>

        <div class="flex justify-center gap-4 mb-8 overflow-x-auto pb-2">
            <button onclick="filterType('all')" class="filter-btn px-4 py-2 rounded-full bg-orange-500 text-white text-sm font-medium shadow-sm whitespace-nowrap">Tout</button>
            <button onclick="filterType('Algerian')" class="filter-btn px-4 py-2 rounded-full bg-white text-gray-600 hover:bg-gray-100 text-sm font-medium shadow-sm whitespace-nowrap">üá©üáø Sp√©cial Alg√©rie</button>
            <button onclick="filterType('Quick')" class="filter-btn px-4 py-2 rounded-full bg-white text-gray-600 hover:bg-gray-100 text-sm font-medium shadow-sm whitespace-nowrap">‚è±Ô∏è Rapide (< 30min)</button>
            <button onclick="filterType('Healthy')" class="filter-btn px-4 py-2 rounded-full bg-white text-gray-600 hover:bg-gray-100 text-sm font-medium shadow-sm whitespace-nowrap">ü•ó Healthy</button>
        </div>

        <div id="results-area">
            <h3 class="text-lg font-semibold text-gray-700 mb-4" id="results-title">Recettes sugg√©r√©es</h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="recipes-grid">
                <div class="col-span-full text-center py-10 text-gray-500">
                    <i class="fas fa-carrot text-4xl mb-3 opacity-50"></i>
                    <p>Entrez vos ingr√©dients pour voir la magie op√©rer !</p>
                </div>
            </div>
        </div>

    </main>

    <footer class="bg-gray-800 text-white py-6 mt-12">
        <div class="container mx-auto px-4 text-center">
            <p class="mb-2">Fait avec <i class="fas fa-heart text-red-500"></i> pour la cuisine maison.</p>
            <p class="text-xs text-gray-500">&copy; 2025 FrigoChef - Tahar Chibani</p>
            <div class="mt-4 flex justify-center gap-4">
                <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-github"></i></a>
                <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-facebook"></i></a>
            </div>
        </div>
    </footer>

    <script>
        // --- Donn√©es (Simul√©es pour l'exemple) ---
        const recipesDatabase = [
            {
                id: 1,
                title: "Chakchouka Simple",
                type: "Algerian",
                time: "25 min",
                difficulty: "Facile",
                calories: "250 kcal",
                image: "https://images.unsplash.com/photo-1590412200988-a436970781fa?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                ingredients: ["tomate", "oignon", "oeuf", "poivron", "ail", "huile"],
                description: "Un classique alg√©rien rapide et d√©licieux. Parfait pour un d√©jeuner l√©ger."
            },
            {
                id: 2,
                title: "Omelette aux Pommes de Terre",
                type: "Quick",
                time: "15 min",
                difficulty: "Tr√®s Facile",
                calories: "320 kcal",
                image: "https://images.unsplash.com/photo-1564834724105-918b73d1b9e0?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                ingredients: ["oeuf", "pomme de terre", "persil", "oignon", "huile", "sel"],
                description: "Le sauveur des soirs de semaine. Simple, efficace et nourrissant."
            },
            {
                id: 3,
                title: "Salade de Riz Compl√®te",
                type: "Healthy",
                time: "20 min",
                difficulty: "Facile",
                calories: "300 kcal",
                image: "https://images.unsplash.com/photo-1512621776951-a57141f2eefd?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                ingredients: ["riz", "thon", "ma√Øs", "tomate", "olive", "oeuf"],
                description: "Une salade fra√Æche et √©quilibr√©e, id√©ale pour utiliser les restes de riz."
            },
            {
                id: 4,
                title: "Chorba Frik",
                type: "Algerian",
                time: "45 min",
                difficulty: "Moyen",
                calories: "400 kcal",
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1d/Chorba_frik_en_pr√©paration.JPG/640px-Chorba_frik_en_pr√©paration.JPG", 
                ingredients: ["viande", "frik", "tomate", "oignon", "celeri", "pois chiche"],
                description: "La soupe traditionnelle incontournable, parfum√©e √† la coriandre."
            },
            {
                id: 5,
                title: "Gratin Dauphinois Express",
                type: "Quick",
                time: "35 min",
                difficulty: "Facile",
                calories: "450 kcal",
                image: "https://images.unsplash.com/photo-1627308595229-7830a5c91f9f?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                ingredients: ["pomme de terre", "cr√®me", "ail", "fromage", "beurre", "lait"],
                description: "R√©confortant et cr√©meux, un accompagnement royal."
            }
        ];

        // --- √âtat de l'application ---
        let currentFilter = 'all';
        let userIngredients = [];

        // --- Gestion des entr√©es ---
        const inputField = document.getElementById('ingredient-input');
        const tagsContainer = document.getElementById('tags-container');

        inputField.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                addIngredient();
            }
        });

        // Fonction pour traiter l'input (supporte les virgules)
        function addIngredient() {
            const rawValue = inputField.value.trim();
            if (!rawValue) return;

            const newIngredients = rawValue.split(',').map(s => s.trim().toLowerCase()).filter(s => s !== "");
            
            newIngredients.forEach(ing => {
                if (!userIngredients.includes(ing)) {
                    userIngredients.push(ing);
                    createTag(ing);
                }
            });

            inputField.value = '';
            findRecipes(); // Recherche automatique apr√®s ajout
        }

        function createTag(text) {
            const tag = document.createElement('div');
            tag.className = 'bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-medium flex items-center gap-2 animate-pulse-once';
            tag.innerHTML = `
                ${text}
                <button onclick="removeIngredient('${text}')" class="hover:text-red-500 focus:outline-none">
                    <i class="fas fa-times"></i>
                </button>
            `;
            tagsContainer.appendChild(tag);
        }

        function removeIngredient(text) {
            userIngredients = userIngredients.filter(ing => ing !== text);
            // Re-render tags
            tagsContainer.innerHTML = '';
            userIngredients.forEach(ing => createTag(ing));
            findRecipes(); // Mise √† jour de la recherche
        }

        // --- Logique de Recherche ---
        function findRecipes() {
            const grid = document.getElementById('recipes-grid');
            grid.innerHTML = '<div class="col-span-full flex justify-center py-10"><div class="loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12"></div></div>';

            // Simulation d'un d√©lai r√©seau (pour l'UX)
            setTimeout(() => {
                let filteredRecipes = recipesDatabase;

                // 1. Filtre par cat√©gorie
                if (currentFilter !== 'all') {
                    filteredRecipes = filteredRecipes.filter(r => r.type === currentFilter);
                }

                // 2. Filtre par ingr√©dients (si l'utilisateur a entr√© quelque chose)
                if (userIngredients.length > 0) {
                    filteredRecipes = filteredRecipes.map(recipe => {
                        // Compter les correspondances
                        const matchCount = recipe.ingredients.filter(ing => 
                            userIngredients.some(uIng => ing.includes(uIng) || uIng.includes(ing))
                        ).length;
                        
                        return { ...recipe, matchCount };
                    })
                    .filter(r => r.matchCount > 0) // Garder ceux qui ont au moins 1 ingr√©dient
                    .sort((a, b) => b.matchCount - a.matchCount); // Trier par pertinence
                }

                displayRecipes(filteredRecipes);
            }, 400);
        }

        // --- Affichage ---
        function displayRecipes(recipes) {
            const grid = document.getElementById('recipes-grid');
            grid.innerHTML = '';

            if (recipes.length === 0) {
                grid.innerHTML = `
                    <div class="col-span-full text-center py-10">
                        <i class="fas fa-search text-4xl text-gray-300 mb-3"></i>
                        <p class="text-gray-500">Aucune recette trouv√©e avec ces crit√®res.</p>
                        <button onclick="currentFilter='all'; updateFilterButtons(); findRecipes();" class="text-orange-500 hover:underline mt-2">R√©initialiser les filtres</button>
                    </div>
                `;
                return;
            }

            recipes.forEach(recipe => {
                // Calculer le pourcentage de correspondance si ingr√©dients saisis
                let matchBadge = '';
                if (userIngredients.length > 0) {
                    const percentage = Math.round((recipe.matchCount / recipe.ingredients.length) * 100);
                    // On plafonne visuellement √† 100% m√™me si partiel pour simplifier l'UX ou on affiche "X/Y ingr√©dients"
                    const displayMatch = recipe.matchCount + '/' + recipe.ingredients.length + ' ingr.';
                    matchBadge = `<span class="absolute top-2 right-2 bg-green-500 text-white text-xs font-bold px-2 py-1 rounded shadow">${displayMatch}</span>`;
                }

                const card = document.createElement('div');
                card.className = 'bg-white rounded-xl shadow-md overflow-hidden recipe-card relative border border-gray-100';
                card.innerHTML = `
                    <div class="h-48 overflow-hidden relative group">
                        <img src="${recipe.image}" alt="${recipe.title}" class="w-full h-full object-cover transition duration-500 group-hover:scale-110">
                        ${matchBadge}
                        <div class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/70 to-transparent p-3">
                            <span class="text-white text-xs font-bold bg-orange-500 px-2 py-1 rounded">${recipe.time}</span>
                        </div>
                    </div>
                    <div class="p-5">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-bold text-gray-800 text-lg leading-tight">${recipe.title}</h3>
                            <span class="text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded-full">${recipe.calories}</span>
                        </div>
                        <p class="text-gray-600 text-sm mb-4 line-clamp-2">${recipe.description}</p>
                        
                        <div class="mb-4">
                            <p class="text-xs text-gray-400 font-semibold uppercase tracking-wider mb-1">Ingr√©dients cl√©s:</p>
                            <div class="flex flex-wrap gap-1">
                                ${recipe.ingredients.slice(0, 4).map(ing => `<span class="text-xs bg-gray-50 text-gray-600 border border-gray-200 px-1.5 py-0.5 rounded">${ing}</span>`).join('')}
                                ${recipe.ingredients.length > 4 ? '<span class="text-xs text-gray-400">...+</span>' : ''}
                            </div>
                        </div>

                        <button class="w-full bg-orange-100 hover:bg-orange-200 text-orange-700 font-bold py-2 rounded transition duration-300">
                            Voir la recette
                        </button>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // --- Filtres UI ---
        function filterType(type) {
            currentFilter = type;
            updateFilterButtons();
            findRecipes();
        }

        function updateFilterButtons() {
            const buttons = document.querySelectorAll('.filter-btn');
            buttons.forEach(btn => {
                // Logique simple : on regarde le texte ou l'onclick pour savoir lequel est actif
                // Pour simplifier ici, on reset tout et on met l'active manuellement visuellement
                if (btn.getAttribute('onclick').includes(`'${currentFilter}'`)) {
                    btn.classList.remove('bg-white', 'text-gray-600');
                    btn.classList.add('bg-orange-500', 'text-white');
                } else {
                    btn.classList.add('bg-white', 'text-gray-600');
                    btn.classList.remove('bg-orange-500', 'text-white');
                }
            });
        }

        // Initialisation
        // (Optionnel) Charger quelques recettes au d√©marrage
        displayRecipes(recipesDatabase);

    </script>
</body>
</html>
